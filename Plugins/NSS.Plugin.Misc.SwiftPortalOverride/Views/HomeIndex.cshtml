@using NSS.Plugin.Misc.SwiftPortalOverride.Models
@using Nop.Web.Framework.Themes
@using NSS.Plugin.Misc.SwiftPortalOverride
@using NSS.Plugin.Misc.SwiftCore.Helpers
@using NSS.Plugin.Misc.SwiftCore.Services
@using Nop.Core
@using Nop.Services.Common
@using Syncfusion.EJ2

@model TransactionModel
@inject IThemeContext themeContext
@inject IWorkContext workContext
@inject IGenericAttributeService genericAttributeService
@inject ICustomerCompanyService customerCompanyService

@{
    Layout = "_ColumnsOne";

    //title
    Html.AddTitleParts("Home");
    //page class
    Html.AppendPageCssClassParts("html-home-page");
    Html.AddCssFileParts("~/Plugins/Misc.SwiftPortalOverride/Content/home.css");
}

@{
    var themeName = themeContext.WorkingThemeName;
    var currentCustomer = workContext.CurrentCustomer;
    var compIdCookieKey = string.Format(SwiftPortalOverrideDefaults.ERPCompanyCookieKey, currentCustomer.Id);
    string eRPCompanyId = genericAttributeService.GetAttribute<string>(currentCustomer, compIdCookieKey);
    bool isAP = customerCompanyService.Authorize(currentCustomer.Id, Convert.ToInt32(eRPCompanyId), ERPRole.AP);
    bool isOperations = customerCompanyService.Authorize(currentCustomer.Id, Convert.ToInt32(eRPCompanyId), ERPRole.Operations);
    bool isBuyer = customerCompanyService.Authorize(currentCustomer.Id, Convert.ToInt32(eRPCompanyId), ERPRole.Buyer);
}


@functions{
    @using Newtonsoft.Json.Serialization;
    @using Newtonsoft.Json;

    string Serialize(object input)
    {
        return JsonConvert.SerializeObject(input, new JsonSerializerSettings
        {
            ContractResolver = new DefaultContractResolver { NamingStrategy = new CamelCaseNamingStrategy() },
            Formatting = Formatting.None
        });
    }
}

@{

    Func<object, object>
    Content1 =
    @<div id="viewMtrModal">
        <div class="d-flex flex-column">
            <div class="d-flex flex-column mt-4 mb-2">
                <table class="table table-striped w3-animate-left nss-table">
                    <thead class="thead-default">
                        <tr>
                            <td scope="col">MTR #</td>
                            <td scope="col">Heat #</td>
                            <td scope="col" class="text-center">Line #</td>
                            <td scope="col">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <template v-for="p in orderMTRs">
                            <tr>
                                <td><a v-bind:href="p.MtrFile" target="_blank" scope="row">{{p.MtrId}}</a></td>
                                <td>{{p.HeatNo}}</td>
                                <td class="text-center">{{p.LineNo}}</td>
                                <td>{{p.Description}}</td>
                            </tr>
                        </template>
                        <template v-if="orderMTRs.length == 0">
                            MTR not available.
                        </template>
                    </tbody>
                </table>
            </div>

        </div>
    </div>;
}
<style>
    .m-b2 {
        margin-bottom: 2rem;
    }

    .p-t6 {
        padding: 5.7rem 0;
    }

    .p-b11 {
        padding-bottom: 11.8rem;
    }

    .p-b1 {
        padding-bottom: 1.2rem;
    }

    .nss-no-orders {
        text-align: center;
        font: normal normal 500 34px/24px "Teko";
        letter-spacing: 0.27px;
        color: #03175B;
        opacity: 1;
    }
</style>


<div id="app" class="page home-page">

    <div class="page-body">
        <div class="d-none d-md-block">
            <div class="row">
                <div class="col-md-9">
                    <div class="row">
                        @if (isOperations || isBuyer)
                        {
                            <div class="col-md-7 col-sm-6 col-12 m-b2">
                                <div class="tab-content" id="pills-tabContent" style="height: 22.7rem">
                                    <div class="tab-pane fade show active" id="" role="tabpanel" aria-labelledby="" style="height: 19.4rem">
                                        @if (Model.OpenOrders.Count > 0)
                                        {
                                            <div class="card-title mb-2 border-bottom-0 mt-2">
                                                <h1>OPEN ORDERS</h1>
                                            </div>
                                            <table class="table table-striped w3-animate-left nss-table">
                                                <thead class="thead-default">
                                                    <tr>
                                                        <td scope="col">Order #</td>
                                                        <td scope="col">PO #</td>
                                                        <td scope="col" class="text-center">Promise Date</td>
                                                        <td scope="col" class="text-center">Scheduled Date</td>
                                                        <td scope="col" class="text-center">Status</td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var order in Model.OpenOrders)
                                                    {
                                                        <tr>
                                                            <td><a href="/orders/@order.OrderId" scope="row">@order.OrderId</a></td>
                                                            <td>@order.PoNo</td>
                                                            <td class="text-center">@order.PromiseDate?.ToString("MM/dd/yyyy")</td>
                                                            <td class="text-center">@order.ScheduledDate?.ToString("MM/dd/yyyy")</td>
                                                            <td class="text-center cursor-pointer">@order.OrderStatusName</td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        }
                                        else
                                        {
                                            <div class="text-center p-t6">
                                                <h2 class="nss-no-orders">You have not placed an</h2>
                                                <h2 class="nss-no-orders">order in the last 30 days.</h2>
                                                <div class="action pt-3">
                                                    <a href="/catalog">
                                                        <button class="swift-color-btn">
                                                            <img src="~/Themes/@themeName/Content/assets/menu.svg" height="20" width="20" alt=""> SHOP SWIFT&#8482;
                                                        </button>
                                                    </a>
                                                </div>
                                            </div>
                                        }
                                    </div>

                                    <div class="text-nowrap nss-dark text-center mb-2 @(Model.OpenOrders.Count > 5 ? "": "d-none")">* Five most recent only.</div>
                                </div>
                            </div>
                        }

                        @if (isOperations)
                        {

                            <div class="col-md-5 col-sm-6 col-12 m-b2">
                                <div class="tab-content" id="pills-tabContent">
                                    <div class=" text-center tab-pane fade show active" id="" role="tabpanel" style="height:19.6rem" aria-labelledby="">
                                        <div class="card-title border-bottom-0">
                                            <h1 style="font: normal normal 500 34px/24px 'Teko';">STATISTICS</h1>
                                        </div>
                                        <div class="row" v-for="stats in companyStats">
                                            <div class="col-md-12 d-block my-1">
                                                <label class="float-left h5-default">{{stats.statName}}</label>
                                                <h5 class="float-right nss-dark-blue">{{stats.statValue}}</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                        @if (isOperations || isBuyer)
                        {
                            @if (Model.ClosedOrders.Count > 0)
                            {
                                <div class="col-md-7 col-sm-6 col-12 m-b2">
                                    <div class="tab-content" id="pills-tabContent">
                                        <div class="tab-pane fade show active" id="" role="tabpanel" aria-labelledby="">
                                            <div class="card-title mb-2 border-bottom-0 mt-2">
                                                <h1>CLOSED ORDERS</h1>
                                            </div>
                                            <table class="table table-striped w3-animate-left nss-table">
                                                <thead class="thead-default">
                                                    <tr>
                                                        <td scope="col">Order #</td>
                                                        <td scope="col">PO #</td>
                                                        <td scope="col" class="text-center">Delivery Date</td>
                                                        <td scope="col" class="text-center">Delivered</td>
                                                        <td scope="col" class="text-center">MTR/POD</td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var order in Model.ClosedOrders)
                                                    {
                                                        <tr>
                                                            <td><a href="/orders/@order.OrderId" scope="row">@order.OrderId</a></td>
                                                            <td>@order.PoNo</td>
                                                            <td class="text-center">@order.DeliveryDate?.ToString("MM/dd/yyyy")</td>
                                                            <td class="text-center">@order.DeliveryStatus</td>
                                                            <td class="text-center cursor-pointer" v-on:mouseover="isHoveringViewMTR = true;" v-on:mouseleave="isHoveringViewMTR = false;">
                                                                <img alt="MTR Icon" v-on:click="handleMtrModal(@eRPCompanyId, @order.OrderId)" src='/Themes/@themeName/Content/assets/icn-mt-report.svg' />
                                                            </td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                            <div class="text-nowrap nss-dark text-center mb-1">* All orders display the five most recent result from the past 30 days.</div>
                                        </div>
                                    </div>
                                </div>
                            }
                        }


                        @if (Model.CreditSummary.CanCredit && (isAP || isBuyer))
                        {
                            <div class="col-md-5 col-sm-6 col-12 m-b2">
                                <div class="tab-content" id="pills-tabContent">
                                    <div class="text-center tab-pane fade show active" id="" role="tabpanel" aria-labelledby="">
                                        <div class="card-title border-bottom-0">
                                            <h1>CREDIT SUMMARY</h1>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 d-block">
                                                <label class="float-left h5-default">Credit Limit</label>
                                                <h5 class="float-right nss-dark-blue">$@DoFormat(Model.CreditSummary?.CreditLimit)</h5>
                                            </div>
                                            <div class="col-md-12 d-block">
                                                <label class="float-left h5-default">Total Open Invoices</label>
                                                <h5 class="float-right nss-dark-blue">$@DoFormat(Model.CreditSummary?.OpenInvoiceAmount)</h5>
                                            </div>
                                            <div class="col-md-12 d-block">
                                                <label class="float-left h5-default">Total Past Due</label>
                                                <h5 style="color: red;" class="float-right">$@DoFormat(Model.CreditSummary?.PastDueAmount)</h5>
                                            </div>
                                            <div class="col-md-12 d-block">
                                                <label class="float-left h5-default">Open Credit</label>
                                                <h5 class="float-right nss-dark-blue">$@DoFormat(Model.CreditSummary?.CreditAmount)</h5>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card p-b1">
                        <div class="card-body text-center contact-card">
                            <div class="avatar-block">
                                <img class="avatar rounded-circle" src="~/Themes/@(themeName)/Content/images/call-avatar.png" alt="profile-default">
                            </div>
                            <h6 class="h4-primary-600-teko mb-2 mt-2 mx-3 nss-dark-blue" style="margin: 20px 0 !important; font-size: 26px;">Marcelo</h6>
                            <h6 class="h5-default">I'm here to provide you with</h6>
                            <h6 class="h5-default mb-3">exceptional customer service.</h6>
                            <div class="d-flex flex-row align-items-center justify-content-center pb-2 cursor-pointer" v-on:click="isCustomerServiceOpen = !isCustomerServiceOpen">
                                <label class="fs12-default mb-0 cursor-pointer">Business Hours</label>
                                <img src="~/Themes/@(themeName)/Content/assets/icn-arrow-up.svg" class="ml-2" v-bind:style="{'transform': isCustomerServiceOpen ? '' : 'rotate(180deg)'}" alt="arrow up" width="20">
                            </div>
                            <div v-if="isCustomerServiceOpen">
                                <div class="d-flex flex-column align-items-center justify-content-center my-2">
                                    <div class="d-flex flex-row w-100">
                                        <label class="h5-primary-600-sans w-25 w-lg-40 text-right mr-3">Mon</label>
                                        <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                                    </div>
                                    <div class="d-flex flex-row w-100">
                                        <label class="h5-primary-600-sans w-25 w-lg-40 text-right mr-3">Tue</label>
                                        <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                                    </div>
                                    <div class="d-flex flex-row w-100">
                                        <label class="h5-primary-600-sans w-25 w-lg-40 text-right mr-3">Wed</label>
                                        <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                                    </div>
                                    <div class="d-flex flex-row w-100">
                                        <label class="h5-primary-600-sans w-25 w-lg-40 text-right mr-3">Thur</label>
                                        <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                                    </div>
                                    <div class="d-flex flex-row w-100">
                                        <label class="h5-primary-600-sans w-25 w-lg-40 w-lg-40 text-right mr-3">Fri</label>
                                        <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                                    </div>
                                    <div class="d-flex flex-row w-100">
                                        <label class="h5-primary-600-sans w-25 w-lg-40 text-right mr-3">Sat</label>
                                        <label class="h5-primary-600-sans">Closed</label>
                                    </div>
                                    <div class="d-flex flex-row w-100">
                                        <label class="h5-primary-600-sans w-25 w-lg-40 text-right mr-3">Sun</label>
                                        <label class="h5-primary-600-sans">Closed</label>
                                    </div>
                                </div>
                            </div>
                            <div class="contact-container">
                                <a href=tel:@Model.CompanyInfo.SalesContact?.Phone class="btn contact-btn">
                                    <img src="~/Themes/@(themeName)/Content/assets/phone.svg" alt="">
                                    <label class="fs12-default mb-0 ml-1">@Model.CompanyInfo.SalesContact?.Phone</label>
                                </a>
                                <a href=mailto:@Model.CompanyInfo.SalesContact?.Email class="btn contact-btn">
                                    <img src="~/Themes/@(themeName)/Content/assets/mail.svg" alt="">
                                    <label class="fs12-default mb-0 ml-1">@Model.CompanyInfo.SalesContact?.Email</label>
                                </a>
                            </div>

                        </div>
                    </div>

                </div>





               @Html.EJS().Dialog("dialog").Visible(false).IsModal(true).Created("onDialogCreated").Header("<span class='dialog-header'>VIEW MTRS</span>").ContentTemplate(@Content1).ShowCloseIcon(true).Visible(false).Width("700px").Target("body").Render()<span class='dialog-header'></span><span class='dialog-header'></span>

            </div>
            <a href="/catalog">
                <div class="discount-block" alt="">
                    <img src="~/Themes/@(themeName)/Content/assets/discounts-feature.PNG" alt="">

                </div>
            </a>
        </div>

    </div>
    <div class="d-md-none">
        <p class="fs-14" style="font-weight: 500; padding: 0 20px; color: #242424;">*All orders display the five most recent results from the past 30-days</p>
        <ul class="nav nav-pills mb-1 mt-2 mx-4 justify-content-center" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation" style="margin-right: 0.3em" v-on:click="showRecentOrders = true;">
                <a class="nav-link" v-bind:class="{'active': showRecentOrders}">Open Orders</a>
            </li>
            <li class="nav-item" role="presentation" v-on:click="showRecentOrders = false;">
                <a class="nav-link" v-bind:class="{'active': !showRecentOrders}">Closed Orders</a>
            </li>
        </ul>

        <div class="mt-2 mx-4">
            <div v-if="showRecentOrders">
                <div v-if="openOrders.length == 0" style="background:#ffffff; padding: 10px;">
                    <div class="text-center p-t6">
                        <h2 class="nss-no-orders">You have not placed an</h2>
                        <h2 class="nss-no-orders">order in the last 30 days.</h2>
                        <div class="action pt-3">
                            <a href="/catalog">
                                <button class="swift-color-btn">
                                    <img src="~/Themes/@themeName/Content/assets/menu.svg" height="20" width="20" alt=""> SHOP SWIFT&#8482;
                                </button>
                            </a>
                        </div>
                    </div>
                </div>
                <div v-for="order in openOrders" class="d-flex flex-column bg-white-shadow mb-3">
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0">Order #</label>
                        </div>
                        <div class="d-flex p-2">
                            <a v-bind:href="'/orders/' + order.orderId" class="fs12-link">{{ order.orderId }}</a>
                        </div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0">PO #</label>
                        </div>
                        <div class="d-flex p-2">
                            <a v-bind:href="'/orders/' + order.orderId" class="fs12-link">{{ order.poNo }}</a>
                        </div>
                    </div>

                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0"> Promise Date</label>
                        </div>
                        <div class="d-flex p-2">
                            <label class="fs12-default mb-0">{{ order.promiseDate | date }}</label>
                        </div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0"> Scheduled Date</label>
                        </div>
                        <div class="d-flex p-2">
                            <label class="fs12-default mb-0">{{ order.scheduledDate | date }}</label>
                        </div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0">Status</label>
                        </div>
                        <div class="d-flex p-2">
                            <label class="fs12-default mb-0">{{ order.orderStatusName }}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div v-if="!showRecentOrders">
                <div v-if="closedOrders.length == 0" style="background:#ffffff; padding: 10px;">
                    <div class="text-center p-t6">
                        <h2 class="nss-no-orders">You have not placed an</h2>
                        <h2 class="nss-no-orders">order in the last 30 days.</h2>
                        <div class="action pt-3">
                            <a href="/catalog">
                                <button class="swift-color-btn">
                                    <img src="~/Themes/@themeName/Content/assets/menu.svg" height="20" width="20" alt=""> SHOP SWIFT&#8482;
                                </button>
                            </a>
                        </div>
                    </div>
                </div>
                <div v-for="order in closedOrders" class="d-flex flex-column bg-white-shadow mb-3">
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0">Order #</label>
                        </div>
                        <div class="d-flex p-2">
                            <a v-bind:href="'/orders/' + order.orderId" class="fs12-link">{{ order.orderId }}</a>
                        </div>
                    </div>

                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0"> Order Date</label>
                        </div>
                        <div class="d-flex p-2">
                            <label class="fs12-default mb-0">{{ order.orderDate | date }}</label>
                        </div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0"> Promise Date</label>
                        </div>
                        <div class="d-flex p-2">
                            <label class="fs12-default mb-0">{{ order.promiseDate | date }}</label>
                        </div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0"> Delivery Date</label>
                        </div>
                        <div class="d-flex p-2">
                            <label class="fs12-default mb-0">{{ order.deliveryDate | date }}</label>
                        </div>
                    </div>
                    <div class="d-flex flex-row">
                        <div class="d-flex bg-primary2 p-2 home-table-sm-header">
                            <label class="fs12-white mb-0">Status</label>
                        </div>
                        <div class="d-flex p-2">
                            <label class="fs12-default mb-0">{{ order.deliveryStatus }}</label>
                        </div>
                    </div>
                </div>
            </div>

            @if (isAP || isBuyer)
            {
                <div class="col-md-5 col-sm-6 col-12 m-b2 p-0 mt-2">
                    <div class="tab-content p-b1" id="pills-tabContent">
                        <div class="text-center tab-pane fade show active" id="" role="tabpanel" aria-labelledby="">
                            <div class="card-title border-bottom-0">
                                <h1>CREDIT SUMMARY</h1>
                            </div>
                            <div class="row">
                                <div class="col-md-12 d-block">
                                    <label class="float-left h5-default">Credit Limit</label>
                                    <h5 class="float-right nss-dark-blue">$@DoFormat(Model.CreditSummary?.CreditLimit)</h5>
                                </div>
                                <div class="col-md-12 d-block">
                                    <label class="float-left h5-default">Total Open Invoices</label>
                                    <h5 class="float-right nss-dark-blue">$@DoFormat(Model.CreditSummary?.OpenInvoiceAmount)</h5>
                                </div>
                                <div class="col-md-12 d-block">
                                    <label class="float-left h5-default">Total Past Due</label>
                                    <h5 style="color: red;" class="float-right">$@DoFormat(Model.CreditSummary?.PastDueAmount)</h5>
                                </div>
                                <div class="col-md-12 d-block">
                                    <label class="float-left h5-default">Open Credit</label>
                                    <h5 class="float-right nss-dark-blue">$@DoFormat(Model.CreditSummary?.CreditAmount)</h5>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            }

            @if (isOperations)
            {

                <div class="col-md-7 col-sm-6 col-12 m-b2 p-0">
                    <div class="tab-content" id="pills-tabContent">
                        <div class=" text-center tab-pane fade show active" id="" role="tabpanel" aria-labelledby="">
                            <div class="card-title border-bottom-0">
                                <h1>STATISTICS</h1>
                            </div>
                            <div class="row" v-for="stats in companyStats">
                                <div class="col-md-12 d-block">
                                    <label class="float-left h5-default">{{stats.statName}}</label>
                                    <h5 class="float-right nss-dark-blue">{{stats.statValue}}</h5>
                                </div>
                            </div>
                            <label class="nss-dark">Combines online and offline orders.</label>
                        </div>
                    </div>
                </div>
            }
        </div>


        <div class="customer-service-section-sm d-flex flex-column justify-content-center align-items-center">
            <div class="avatar-block">
                <div></div>
                <img class="avatar rounded-circle" src="~/Themes/@(themeName)/Content/images/call-avatar.png" alt="profile-default" v-on:click="isCustomerServiceOpen = !isCustomerServiceOpen">
                <div v-on:click="isCustomerServiceOpen = !isCustomerServiceOpen"></div>
            </div>
            <div class="bg-white d-flex flex-column w-100 align-items-center pb-3 pt-1">
                <div class="d-flex flex-column w-100 align-items-center" v-on:click="isCustomerServiceOpen = !isCustomerServiceOpen">
                    <label class="title">Marcelo</label>
                    <img src="~/Themes/@(themeName)/Content/assets/icn-arrow-up.svg" v-bind:style="{'transform': isCustomerServiceOpen ? 'rotate(180deg)' : ''}" alt="arrow up" width="28">
                </div>

                <div v-if="isCustomerServiceOpen">
                    <div class="d-flex flex-column align-items-center justify-content-center my-2">
                        <div class="d-flex flex-row w-100">
                            <label class="h5-primary-600-sans w-40 text-right mr-3">Mon</label>
                            <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                        </div>
                        <div class="d-flex flex-row w-100">
                            <label class="h5-primary-600-sans w-40 text-right mr-3">Tue</label>
                            <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                        </div>
                        <div class="d-flex flex-row w-100">
                            <label class="h5-primary-600-sans w-40 text-right mr-3">Wed</label>
                            <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                        </div>
                        <div class="d-flex flex-row w-100">
                            <label class="h5-primary-600-sans w-40 text-right mr-3">Thur</label>
                            <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                        </div>
                        <div class="d-flex flex-row w-100">
                            <label class="h5-primary-600-sans w-40 text-right mr-3">Fri</label>
                            <label class="h5-primary-600-sans">8:00am - 5:00pm</label>
                        </div>
                        <div class="d-flex flex-row w-100">
                            <label class="h5-primary-600-sans w-40 text-right mr-3">Sat</label>
                            <label class="h5-primary-600-sans">Closed</label>
                        </div>
                        <div class="d-flex flex-row w-100">
                            <label class="h5-primary-600-sans w-40 text-right mr-3">Sun</label>
                            <label class="h5-primary-600-sans">Closed</label>
                        </div>
                    </div>

                    <label class="h5-default mt-2 mx-5">I'm here to provide you with</label>
                    <label class="h5-default mb-3 mx-5">exceptional customer service.</label>

                    <div class="d-flex flex-row justify-content-center align-items-center mb-3">
                        <a href=tel:@Model.CompanyInfo.SalesContact?.Phone class="d-flex flex-row align-items-end">
                            <img src="~/Themes/@(themeName)/Content/assets/phone.svg" alt="" height="25">
                            <label class="h4-primary ml-2 mr-4 mb-0">Call Us</label>
                        </a>
                        <a href=mailto:@Model.CompanyInfo.SalesContact?.Email class="d-flex flex-row align-items-end">
                            <img src="~/Themes/@(themeName)/Content/assets/mail.svg" alt="" height="25">
                            <label class="h4-primary ml-2 mb-0">Email Us</label>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <img src="~/Themes/@(themeName)/Content/assets/bg-discount-mobile.png" alt="" width="100%" style=" margin-bottom: 80px;">
    </div>

</div>

</div>

<script>
    let companyStats = @Html.Raw(Serialize(Model.CompanyStats));

    // for mobile view
    let openOrders = @Html.Raw(Serialize(Model.OpenOrders));
    let closedOrders = @Html.Raw(Serialize(Model.ClosedOrders));

    var companyId = @Html.Raw(eRPCompanyId)

    new Vue({
        el: '#app',
        data: {
            openOrders,
            closedOrders,
            companyStats,
            showRecentOrders: true,
            isCustomerServiceOpen: false,
            isHoveringViewMTR: false,
            orderMTRs: []
        },
        methods: {
            showLoading: function () {
                $('#custom-loading').show();
            },
            hideLoading: function () {
                $('#custom-loading').hide();
            },
            handleMtrModal: function (companyId, orderId) {

                const request = {
                    companyId,
                    orderId
                }

                this.showLoading();
                const self = this;
                $.ajax({
                    url: "@Url.Action("GetOrderMTRs", "HomeOverride")",
                    type: 'GET',
                    data: request,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data, _, _) {
                        self.orderMTRs = data.MTRs;
                        viewMtrModal.show();
                        self.hideLoading();
                    },
                    error: function (xhr, thrownError) {
                        self.hideLoading();
                    }
                });
            }
        },
    });

    function onDialogCreated() {
        viewMtrModal = this;
    }

</script>

@functions{
    string DoFormat(decimal? myNumber)
    {
        var s = string.Format("{0:N2}", myNumber);

        return s;
    }
}
<ejs-scripts></ejs-scripts>
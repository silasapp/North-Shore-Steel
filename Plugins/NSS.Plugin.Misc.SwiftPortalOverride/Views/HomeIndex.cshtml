@using NSS.Plugin.Misc.SwiftPortalOverride.Models
@model TransactionModel
@using Nop.Web.Framework.Themes
@using Syncfusion.EJ2
@inject IThemeContext themeContext
@{
    Layout = "_ColumnsOne";

    //title
    Html.AddTitleParts("Home");
    //page class
    Html.AppendPageCssClassParts("html-home-page");
}

@{
    var themeName = themeContext.WorkingThemeName;
}


<div class="page home-page">
    <div class="page-body">
        <div>
            <div class="row">
                <div class="col-md-9">

                    <ul class="nav nav-pills mb-1 " id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation" style="margin-right: 0.3em">
                            <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Recent Orders</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Recent Invoices</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="pills-tabContent">
                        <div class="responsive-table-container tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                            <ejs-grid id="OrderGrid" dataSource="@Model.RecentOrders" allowPaging="true" allowFiltering="false">
                                <e-grid-filtersettings type="Menu"></e-grid-filtersettings>
                                <e-grid-pagesettings pageSize="50" pageSizes="true"></e-grid-pagesettings>
                                <e-grid-columns>
                                    <e-grid-column template="#orderNo" headerText="Order #" minWidth="120" width="70"></e-grid-column>
                                    <e-grid-column field="Weight" headerText="Tot. Weight (lbs)" minWidth="120" width="70"></e-grid-column>
                                    <e-grid-column template="#orderTotal" headerText="Order Amount" minWidth="120" width="70"></e-grid-column>
                                    <e-grid-column field="PONo" headerText="PO#" minWidth="80" width="100"></e-grid-column>
                                    <e-grid-column field="EstDeliveryDate" headerText="Est. Delivery" minWidth="120" width="70" format="MM/dd/yyyy"></e-grid-column>
                                    <e-grid-column field="OrderStatusName" headerText="Status" minWidth="110" width="70"></e-grid-column>
                                </e-grid-columns>
                            </ejs-grid>
                        </div>
                        <div class="responsive-table-container tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <ejs-grid id="InvoiceGrid" dataSource="@Model.RecentInvoices" allowPaging="true" allowFiltering="false">
                                <e-grid-filtersettings type="Menu"></e-grid-filtersettings>
                                <e-grid-pagesettings pageSize="50" pageSizes="true"></e-grid-pagesettings>
                                <e-grid-columns>
                                    <e-grid-column field="InvoiceId" headerText="Invoice #" minWidth="120" width="70"></e-grid-column>
                                    <e-grid-column template="#invoiceOrderNo" headerText="Order #" minWidth="120" width="70"></e-grid-column>
                                    <e-grid-column template="#invoiceAmount" headerText="Invoice Amount" minWidth="120" width="70"></e-grid-column>
                                    <e-grid-column field="InvoiceDate" headerText="Invoice Date" minWidth="120" width="70" format="MM/dd/yyyy"></e-grid-column>
                                    <e-grid-column field="InvoiceDueDate" headerText="Due Date" minWidth="120" width="70" format="MM/dd/yyyy"></e-grid-column>
                                    <e-grid-column template="#invoiceStatus" headerText="Status" minWidth="110" width="70"></e-grid-column>
                                </e-grid-columns>
                            </ejs-grid>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 contact-block">
                    @if (Model.CompanyInfo != null)
                    {
                        <div class="card">
                            <div class="card-body text-center contact-card">
                                <div class="avatar-block">
                                    <div></div>
                                    <img class="avatar rounded-circle" src="~/Themes/@(themeName)/Content/assets/headset.svg" alt="profile-default">
                                </div>
                                <h6 class=card-title>Outstanding customer service is our promise</h6>
                                <p class=card-text>I'm here to provide you with exceptional customer service.</p>
                                <h6 class="card-subtitle mb-2 text-muted">Business Hours</h6>

                                @*<h6 class="card-title">@Model.CompanyInfo.SalesContact?.Name</h6>*@
                                <div class="contact-container">
                                    <a href=tel:@Model.CompanyInfo.SalesContact?.Phone class="btn contact-btn">
                                        <img src="~/Themes/@(themeName)/Content/assets/phone.svg" alt="">
                                    </a>
                                    <a href=mailto:@Model.CompanyInfo.SalesContact?.Email class="btn contact-btn">
                                        <img src="~/Themes/@(themeName)/Content/assets/mail.svg" alt="">
                                    </a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
            <div class="discount-block" alt="">
                <img src="~/Themes/@(themeName)/Content/assets/discount.PNG" alt="">
                <div class="action">
                    <button class="white-btn">
                        <img src="~/Themes/@(themeName)/Content/assets/menu.svg" height="20"
                             width="20" alt=""> SHOP SWIFT&#8482;
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script id="orderNo" type="text/x-template">
    <a href="/orders/${OrderId}">${OrderId}</a>
</script>
<script id="invoiceOrderNo" type="text/x-template">
    <a href="/orders/${OrderNo}">${OrderNo}</a>
</script>
<script id="orderTotal" type="text/x-template">
    $${OrderTotal}
</script>

<script id="invoiceAmount" type="text/x-template">
    $${InvoiceAmount}
</script>

<script id="invoiceStatus" type="text/x-template">
    ${if(InvoiceStatusName.indexOf("Past"))}
    <span>${InvoiceStatusName}</span>
    ${else}
    <span style="color: red;">${InvoiceStatusName}</span>
    ${/if}
</script>
<ejs-scripts></ejs-scripts>